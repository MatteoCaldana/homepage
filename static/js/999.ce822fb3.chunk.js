"use strict";(self.webpackChunkmatteocaldana=self.webpackChunkmatteocaldana||[]).push([[999],{9645:function(e,n,t){t.r(n),t.d(n,{default:function(){return se}});var s=t(4165),a=t(1413),i=t(5861),r=t(9439),c=t(2791),o=t(4721),l=t(1554),d=t(3967),u=t(1968),x=t.n(u),g={dateRegex:"\\[(?<d>\\d+)/(?<m>\\d+)/(?<y>\\d+), (?<H>\\d+):(?<M>\\d+):(?<S>\\d+)\\] ",contactToMessage:": ",specialCharacter:"\u200e",mediaPrecursor:"\u200e",deletedMessageRegex:"\u200e((Hai eliminato questo messaggio)|(Questo messaggio \xe8 stato eliminato)).",mediaTypes:["immagine","audio","video","documento","GIF","sticker","contatto","Posizione"]},h=t(3433),p=function(e,n,t){for(var s=function(e,n){var t="(?<sender>".concat(n.join("|"),")").concat(e.contactToMessage),s="(.*)".concat(e.mediaPrecursor,"(?<message>.*)"),a=new RegExp("^".concat(e.dateRegex).concat(t,"(?<message>.*)")),i=new RegExp("^".concat(e.mediaPrecursor).concat(e.dateRegex).concat(t).concat(s)),r=new RegExp("^".concat(e.dateRegex).concat(t).concat(e.deletedMessageRegex)),c=new RegExp("^".concat(e.dateRegex).concat(e.specialCharacter,"{1,2}(?<message>(.*))"));return function(t){var s=r.exec(t);if(s)return{type:"deleted",message:"",sender:s.groups.sender,senderId:n.indexOf(s.groups.sender)};var o=a.exec(t);if(o)return{type:"plainText",message:o.groups.message,sender:o.groups.sender,senderId:n.indexOf(o.groups.sender)};var l=i.exec(t);if(l){var d=l.groups.message,u="";return e.mediaTypes.forEach((function(e){d.includes(e)&&(u+=":"+e)})),{type:"media"+u,message:d,sender:l.groups.sender,senderId:n.indexOf(l.groups.sender)}}var x=c.exec(t);return x?{type:"info",message:x.groups.message,sender:"",senderId:-1}:{type:""}}}(n,t),i=e.split("\n"),r=[],c=0;c<i.length;++c){var o=s(i[c]);if(o.type){var l=m(i[c],n);r.length&&r[r.length-1].timestamp-l>60&&(r[r.length-1].rawText+=i[c]),r.push((0,a.Z)({rawText:i[c],timestamp:l},o))}else r.length>0?r[r.length-1].rawText+=i[c]:console.log("Error: Line does not match start and does not have any message before!",i[c])}return r.sort((function(e,n){return e.timestamp-n.timestamp})),r},m=function(e,n){var t=new RegExp(n.dateRegex).exec(e),s=function(e){return t.groups[e]?parseInt(t.groups[e]):null};return new Date(s("y")<100?s("y")+2e3:s("y"),s("m")-1,s("d"),s("H"),s("M"),s("S"))},f=t(4942),j=t(4567),Z=t(3006),y=t(1153),b=t(5849),v=t(7639),S=t(977),P=t(3236),w=t(2411),T=t(5423),k=t(7961),z=t(215),C=t(6759),R=t(7247),F=t(2419),E=t(184),M=function(e){var n=e.name,t=e.state,s=e.setState,a=e.maxLen,i=void 0===a?30:a,o=(0,c.useState)(!0),l=(0,r.Z)(o,2),d=l[0],u=l[1];return d?(0,E.jsx)(P.Z,{dense:!0,style:{padding:0},children:(0,E.jsxs)(w.ZP,{style:{padding:0},children:[(0,E.jsx)(S.Z,{onClick:function(){return u(!1)},size:"small",children:(0,E.jsx)(z.Z,{})}),(0,E.jsxs)("b",{children:[n,":\xa0"]}),(0,E.jsxs)("span",{style:{fontSize:13},children:[t.join(",").slice(0,i),t.join(", ").length>i?"...":""]})]})}):(0,E.jsxs)(P.Z,{dense:!0,style:{padding:0},children:[(0,E.jsxs)(w.ZP,{style:{padding:0},children:[(0,E.jsx)(S.Z,{onClick:function(){return u(!0)},size:"small",children:(0,E.jsx)(C.Z,{})}),(0,E.jsxs)("b",{children:[n,":"]})]}),t.map((function(e,n){return(0,E.jsxs)(w.ZP,{style:{marginLeft:20},children:[(0,E.jsx)(Z.Z,{size:"small",variant:"standard",value:e,onChange:function(e){return s((function(t){return t.map((function(t,s){return s===n?e.target.value:t}))}))}}),(0,E.jsx)(S.Z,{onClick:function(){return s((function(e){return e.filter((function(e,t){return t!==n}))}))},size:"small",children:(0,E.jsx)(R.Z,{})})]})})),(0,E.jsx)(w.ZP,{children:(0,E.jsx)(S.Z,{onClick:function(){return s((function(e){return[].concat((0,h.Z)(e),[""])}))},size:"small",children:(0,E.jsx)(F.Z,{})})})]})},L=function(e){var n=e.settings,t=e.setSettings,s=e.field;return(0,E.jsx)(Z.Z,{size:"small",variant:"standard",color:"secondary",label:s,value:n[s],onChange:function(e){return t((function(n){return(0,a.Z)((0,a.Z)({},n),{},(0,f.Z)({},s,e.target.value))}))},fullWidth:!0})},I=function(e){var n=e.theme,t=e.settings,s=e.setSettings,i=e.loading,r=e.setLoading,o=e.rawFile,d=e.setRawFile,u=e.rawText;return(0,E.jsxs)(y.ZP,{container:!0,children:[(0,E.jsxs)(y.ZP,{item:!0,style:{minWidth:"50%"},children:[(0,E.jsx)(j.Z,{variant:"h6",children:"Load the file"}),(0,E.jsxs)(y.ZP,{container:!0,alignItems:"center",children:[(0,E.jsxs)(b.Z,{component:"label",color:"secondary",startIcon:(0,E.jsx)(T.Z,{}),children:["Upload File",(0,E.jsx)("input",{onChange:function(e){r(!0),d(e.target.files.item(0))},type:"file",accept:".txt",hidden:!0})]}),i?(0,E.jsx)(l.Z,{color:"secondary",disableShrink:!0}):o?(0,E.jsxs)(c.Fragment,{children:[o.name,(0,E.jsx)("br",{}),(0,E.jsx)("textarea",{readOnly:!0,value:u,style:{resize:"vertical",minWidth:"95%",minHeight:300,backgroundColor:n.palette.primary.main,color:n.palette.primary.contrastText}})]}):null]})]}),(0,E.jsxs)(y.ZP,{item:!0,style:{minWidth:"50%"},children:[(0,E.jsxs)(y.ZP,{container:!0,children:[(0,E.jsx)(j.Z,{variant:"h6",children:"Settings"}),(0,E.jsx)(v.Z,{title:(0,E.jsxs)("ul",{children:[(0,E.jsx)("li",{children:"dateRegex: regex of the timestamp, need symbolic groups"}),(0,E.jsx)("li",{children:"contactToMessage: separator between contact name and message"}),(0,E.jsx)("li",{children:" specialCharacter: character present in special info messages without a sender (for iPhone is U200E) "}),(0,E.jsx)("li",{children:" mediaPrecursor: character present at the start of messages containing media (for iPhone is U200E)"}),(0,E.jsx)("li",{children:" mediaTypes: list of possible medias in your local language"}),(0,E.jsx)("li",{children:" specialActions: list of regex matching special info actions, may add the only special action ['(.*)'] to accept anything that has a special character precursor"})]}),children:(0,E.jsx)(S.Z,{size:"small",children:(0,E.jsx)(k.Z,{})})})]}),(0,E.jsxs)(P.Z,{dense:!0,children:[(0,E.jsx)(w.ZP,{children:(0,E.jsx)(L,{settings:t,setSettings:s,field:"dateRegex"})}),(0,E.jsx)(w.ZP,{children:(0,E.jsx)(L,{settings:t,setSettings:s,field:"contactToMessage"})}),(0,E.jsx)(w.ZP,{children:(0,E.jsx)(L,{settings:t,setSettings:s,field:"specialCharacter"})}),(0,E.jsx)(w.ZP,{children:(0,E.jsx)(L,{settings:t,setSettings:s,field:"mediaPrecursor"})}),(0,E.jsx)(w.ZP,{children:(0,E.jsx)(M,{name:"Media Type",state:t.mediaTypes,setState:function(e){return s((function(n){return(0,a.Z)((0,a.Z)({},n),{},{mediaTypes:"function"===typeof e?e(n.mediaTypes):e})}))}})})]})]})]})},D=t(986),H=function(e){var n=e.analyzing,t=e.analyze,s=e.contacts,a=e.setContacts;return(0,E.jsxs)(c.Fragment,{children:[(0,E.jsx)(o.Z,{style:{marginTop:10,marginBottom:10}}),(0,E.jsx)(j.Z,{variant:"h6",children:"Specify Contacts and Go!"}),(0,E.jsx)(M,{name:"Contacts",state:s,setState:a,maxLen:80}),(0,E.jsx)(y.ZP,{container:!0,justifyContent:"center",children:(0,E.jsx)(b.Z,{variant:"contained",color:"secondary",onClick:t,children:"Analyze!"})}),n?(0,E.jsx)(D.Z,{color:"secondary",style:{marginTop:10,marginBottom:10}}):null]})},B=t(7740),O=function(){return(0,E.jsxs)(c.Fragment,{children:[(0,E.jsx)(o.Z,{style:{marginTop:10,marginBottom:10}}),(0,E.jsx)(j.Z,{variant:"h6",children:"How To Get The Chat File"}),(0,E.jsxs)("ul",{children:[(0,E.jsx)("li",{children:(0,E.jsx)(B.Z,{to:"https://faq.whatsapp.com/it/android/23756533",children:"For Android"})}),(0,E.jsx)("li",{children:(0,E.jsx)(B.Z,{to:"https://faq.whatsapp.com/it/iphone/20888066",children:"For iPhone"})})]})]})},W=t.p+"static/media/step1.945136fa4053d1129fc0.png",q=t.p+"static/media/step2.c1bcb33de0188b393e81.png",A=t.p+"static/media/step3.5ef7495a7774105fec62.png",G=t.p+"static/media/step4.1.ccfe7c79349b65423cb1.png",U=t.p+"static/media/step4.2.3b08599e5dc1a871d230.png",Q=t.p+"static/media/step5.c24f22c148c3bf9b5363.png",J=t.p+"static/media/step6.f78c677499b97432aaed.png",K=t.p+"static/media/step7.1.5950de3663b2c8669ec5.png",N=t.p+"static/media/step7.2.0477fea51ef3cfe095b1.png",V=c.lazy((function(){return Promise.all([t.e(116),t.e(697)]).then(t.bind(t,4697))})),X=c.lazy((function(){return Promise.all([t.e(711),t.e(116),t.e(782)]).then(t.bind(t,6782))})),Y=c.lazy((function(){return Promise.all([t.e(434),t.e(711),t.e(640)]).then(t.bind(t,2640))})),$=c.lazy((function(){return Promise.all([t.e(434),t.e(711),t.e(75)]).then(t.bind(t,2075))})),_=c.lazy((function(){return Promise.all([t.e(116),t.e(90)]).then(t.bind(t,9090))})),ee=c.lazy((function(){return Promise.all([t.e(434),t.e(711),t.e(397)]).then(t.bind(t,3397))})),ne=[W,q,A,G,U,Q,J,K,N],te=function(){return(0,E.jsxs)("div",{children:[(0,E.jsx)(l.Z,{color:"secondary",disableShrink:!0})," Loading..."]})},se=function(){var e=(0,c.useState)(!1),n=(0,r.Z)(e,2),t=n[0],l=n[1],u=(0,c.useState)(!1),m=(0,r.Z)(u,2),f=m[0],j=m[1],Z=(0,c.useState)(null),y=(0,r.Z)(Z,2),b=y[0],v=y[1],S=(0,c.useState)(""),P=(0,r.Z)(S,2),w=P[0],T=P[1],k=(0,c.useState)(g),z=(0,r.Z)(k,2),C=z[0],R=z[1],F=(0,c.useState)([]),M=(0,r.Z)(F,2),L=M[0],D=M[1],B=(0,c.useState)([]),W=(0,r.Z)(B,2),q=W[0],A=W[1],G=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A(p(w,C,L.filter((function(e){return""!==e}))).map((function(e,n){return(0,a.Z)((0,a.Z)({},e),{},{id:n})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){b&&b.text().then((function(e){T(e),l(!1)}))}),[b]),(0,c.useEffect)((function(){w&&D(function(e,n){var t=e.split("\n"),s=new RegExp("^".concat(n.dateRegex,"(?<sender>(.*?))").concat(n.contactToMessage)),a=new Set;return t.forEach((function(e){var n=s.exec(e);n&&a.add(n.groups.sender)})),(0,h.Z)(a)}(w,C))}),[w,C]);var U=(0,d.Z)();return(0,E.jsxs)(c.Fragment,{children:[(0,E.jsx)(x(),{children:ne.map((function(e,n){return(0,E.jsx)("img",{src:e,alt:n,style:{height:300,marginLeft:"auto",marginRight:"auto",display:"block"}},n)}))}),(0,E.jsx)(O,{}),(0,E.jsx)(o.Z,{style:{marginTop:10,marginBottom:10}}),(0,E.jsx)(I,{theme:U,settings:C,setSettings:R,loading:t,setLoading:l,rawFile:b,setRawFile:v,rawText:w}),w.length?(0,E.jsx)(H,{analyzing:f,analyze:function(){j(!0),A([]),setTimeout((function(){return G().then((function(){return j(!1)}))}),200)},contacts:L,setContacts:D}):null,q.length?(0,E.jsxs)(c.Fragment,{children:[(0,E.jsx)(c.Suspense,{fallback:(0,E.jsx)(te,{}),children:(0,E.jsx)(V,{textDf:q})}),(0,E.jsx)(c.Suspense,{fallback:(0,E.jsx)(te,{}),children:(0,E.jsx)(X,{textDf:q})}),(0,E.jsx)(c.Suspense,{fallback:(0,E.jsx)(te,{}),children:(0,E.jsx)(Y,{textDf:q})}),(0,E.jsx)(c.Suspense,{fallback:(0,E.jsx)(te,{}),children:(0,E.jsx)($,{textDf:q})}),(0,E.jsx)(c.Suspense,{fallback:(0,E.jsx)(te,{}),children:(0,E.jsx)(_,{textDf:q})}),(0,E.jsx)(c.Suspense,{fallback:(0,E.jsx)(te,{}),children:(0,E.jsx)(ee,{textDf:q})})]}):null]})}}}]);
//# sourceMappingURL=999.ce822fb3.chunk.js.map