{"version":3,"file":"static/js/75.7b8d50a5.chunk.js","mappings":"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","sources":["App/pages/Projects/projects/WaText/components/CumulativeStats.jsx","App/pages/Projects/projects/WaText/components/generic/BasicTabs.jsx","App/pages/Projects/projects/WaText/components/generic/Plot.jsx"],"sourcesContent":["import React from \"react\";\r\n\r\nimport Divider from '@mui/material/Divider';\r\nimport Typography from \"@mui/material/Typography\";\r\nimport { Grid, IconButton, Tooltip } from \"@mui/material\";\r\n\r\nimport HelpIcon from '@mui/icons-material/Help';\r\n\r\nimport Plot from './generic/Plot';\r\nimport * as d3 from \"d3\";\r\nimport BasicTabs from \"./generic/BasicTabs\";\r\n\r\nconst MAX_POINTS = 200;\r\n\r\nconst cumsum = (vals) => {\r\n  const x = vals.map(x => x.timestamp);\r\n  const y = vals.map(x => x.y).map((sum => value => sum += value)(0));\r\n  if( x.length <= MAX_POINTS ) {\r\n    return {x, y};\r\n  }     \r\n  let xFilter = [], yFilter = [];\r\n  for(let i = 0; i < x.length; i+=Math.trunc(x.length/MAX_POINTS)+1) {\r\n    xFilter.push(x[i]);\r\n    yFilter.push(y[i]);\r\n  }\r\n  xFilter.push(x[x.length-1]);\r\n  yFilter.push(y[x.length-1]);\r\n  return {x:xFilter, y:yFilter};\r\n}\r\n\r\nconst plotGenerator = (textDf) => {\r\n  const groupBySender = d3.group(textDf, x => x.sender);\r\n  let timestampBySender = [];\r\n  groupBySender.forEach((val, key) => {\r\n    if (key !== \"\") {  \r\n      timestampBySender.push({\r\n        type: 'scatter',\r\n        ...cumsum(val),\r\n        mode: 'lines+markers',\r\n        name: key,\r\n      })\r\n    }\r\n  });\r\n  return () => {\r\n    return (\r\n      <Grid container justifyContent=\"center\">\r\n        <Plot\r\n          data={[\r\n            {\r\n              type: 'scatter', mode: 'lines+markers',\r\n              ...cumsum(textDf),\r\n              name: 'Total'\r\n            },\r\n            ...timestampBySender\r\n          ]}\r\n        />\r\n      </Grid>\r\n    );\r\n  }\r\n}\r\n\r\nconst CumulativeStats = ({ textDf }) => {\r\n  return (\r\n    <React.Fragment>\r\n      <Divider style={{ marginTop: 10, marginBottom: 10 }} />\r\n      <Grid container>\r\n        <Typography variant=\"h6\">\r\n          Cumulative Stats\r\n        </Typography>\r\n        <Tooltip title={<ul><li>Toggle the sender by clicking on the legend on the right</li><li>Some points may have been removed to avoid stressing the CPU</li></ul>}>\r\n          <IconButton size=\"small\">\r\n            <HelpIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n      </Grid>\r\n      <BasicTabs labels={[\"Number of Messages\", \"Number of Characters\"]}\r\n        tabs={[\r\n          { component: plotGenerator(textDf.map(x => ({ timestamp: x.timestamp, sender: x.sender, y: 1 }))) },\r\n          {\r\n            component: plotGenerator(textDf.filter(x => x.type === \"plainText\")\r\n              .map(x => ({ timestamp: x.timestamp, sender: x.sender, y: x.message.length })))\r\n          },\r\n        ]}\r\n      />\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default CumulativeStats;","import React, { useState } from 'react';\r\n\r\nimport Tabs from '@mui/material/Tabs';\r\nimport Tab from '@mui/material/Tab';\r\nimport Box from '@mui/material/Box';\r\n\r\nconst TabPanel = (props) => {\r\n  const { children, value, index, ...other } = props;\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`simple-tabpanel-${index}`}\r\n      aria-labelledby={`simple-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst allyProps = (index) => {\r\n  return {\r\n    id: `simple-tab-${index}`,\r\n    'aria-controls': `simple-tabpanel-${index}`,\r\n  };\r\n}\r\n\r\nconst BasicTabs = ({labels, tabs}) => {\r\n  const [value, setValue] = useState(0);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  return (\r\n    <Box sx={{ width: '100%' }}>\r\n      <Box sx={{ borderBottom: 1, borderColor: 'divider' }}>\r\n        <Tabs variant=\"scrollable\" scrollButtons allowScrollButtonsMobile \r\n          value={value} onChange={handleChange} textColor=\"inherit\"\r\n        >\r\n          {labels.map((l, i) => <Tab label={l} key={i} {...allyProps(i)} />)}\r\n        </Tabs>\r\n      </Box>\r\n      {tabs.map((t, i) => \r\n        <TabPanel value={value} index={i} key={i}>\r\n          <t.component/>\r\n        </TabPanel>\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default BasicTabs;","import React from \"react\";\r\n\r\nimport { useTheme } from \"@mui/system\";\r\n\r\nimport Plot from 'react-plotly.js';\r\n\r\n// https://stackoverflow.com/questions/27936772/how-to-deep-merge-instead-of-shallow-merge\r\n/**\r\n * Simple object check.\r\n * @param item\r\n * @returns {boolean}\r\n */\r\n export function isObject(item) {\r\n  return (item && typeof item === 'object' && !Array.isArray(item));\r\n}\r\n\r\n/**\r\n * Deep merge two objects.\r\n * @param target\r\n * @param ...sources\r\n */\r\nexport function mergeDeep(target, ...sources) {\r\n  if (!sources.length) return target;\r\n  const source = sources.shift();\r\n\r\n  if (isObject(target) && isObject(source)) {\r\n    for (const key in source) {\r\n      if (isObject(source[key])) {\r\n        if (!target[key]) Object.assign(target, { [key]: {} });\r\n        mergeDeep(target[key], source[key]);\r\n      } else {\r\n        Object.assign(target, { [key]: source[key] });\r\n      }\r\n    }\r\n  }\r\n\r\n  return mergeDeep(target, ...sources);\r\n}\r\n// -----------------------------------------------------------------------------\r\n\r\nconst defaultLayout = (theme) => ({\r\n  width: '100%', height: 500, margin: {\r\n    l: 40,\r\n    r: 20,\r\n    b: 18,\r\n    t: 30,\r\n    pad: 0\r\n  },\r\n  paper_bgcolor: theme.palette.background.paper,\r\n  plot_bgcolor: theme.palette.background.paper,\r\n  xaxis: {\r\n    color: theme.palette.text.primary,\r\n  },\r\n  yaxis: {\r\n    color: theme.palette.text.primary\r\n  },\r\n  legend: {\r\n    font: {\r\n      color: theme.palette.text.primary\r\n    },\r\n  },\r\n  title: {\r\n    font: {\r\n      color: theme.palette.text.primary,\r\n    }\r\n  },\r\n  scene: {\r\n    xaxis: {\r\n      color: theme.palette.text.primary\r\n    },\r\n    yaxis: {\r\n      color: theme.palette.text.primary\r\n    },\r\n    zaxis: {\r\n      color: theme.palette.text.primary\r\n    },\r\n  }\r\n});\r\n\r\nconst CustomPlot = (props) => {\r\n  const theme = useTheme();\r\n  const layout = defaultLayout(theme);\r\n  return (\r\n    <Plot\r\n      data={props.data}\r\n      layout={props.layout ? mergeDeep(props.layout, layout) : layout}\r\n    />\r\n  );\r\n}\r\n\r\nexport default CustomPlot;"],"names":["cumsum","vals","sum","x","map","timestamp","y","value","length","xFilter","yFilter","i","Math","trunc","push","plotGenerator","textDf","groupBySender","d3","sender","timestampBySender","forEach","val","key","_objectSpread","type","mode","name","_jsx","Grid","container","justifyContent","children","Plot","data","concat","_ref","_jsxs","React","Divider","style","marginTop","marginBottom","Typography","variant","Tooltip","title","IconButton","size","HelpIcon","BasicTabs","labels","tabs","component","filter","message","TabPanel","props","index","other","_objectWithoutProperties","_excluded","role","hidden","id","_useState","useState","_useState2","_slicedToArray","setValue","Box","sx","width","borderBottom","borderColor","Tabs","scrollButtons","allowScrollButtonsMobile","onChange","event","newValue","textColor","l","Tab","label","t","isObject","item","Array","isArray","mergeDeep","target","_len","arguments","sources","_key","source","shift","Object","assign","_defineProperty","apply","layout","theme","height","margin","r","b","pad","paper_bgcolor","palette","background","paper","plot_bgcolor","xaxis","color","text","primary","yaxis","legend","font","scene","zaxis","defaultLayout","useTheme"],"sourceRoot":""}