"use strict";(self.webpackChunkmatteocaldana=self.webpackChunkmatteocaldana||[]).push([[842],{969:function(t,e,a){a.r(e),a.d(e,{default:function(){return P}});var r=a(9439),n=a(2791),o=a(201),i=a(9722),s=a(8922),c=a(6442),p=a(5221),u=a(9961),l=a(9620),m=a(7626),h=a(6293),d=(a(3666),a(7762)),f=a(8559),g=a.n(f),y=(a(5804),a(5660),function(t){var e=(0,h.Sx)();return(0,n.useEffect)((function(){var a=g().control.fullscreen(t);return a.addTo(e),function(){var t,e,r,n=null!==(t=null===(e=a.getContainer())||void 0===e?void 0:e.getElementsByClassName("leaflet-control-zoom-fullscreen"))&&void 0!==t?t:[],o=(0,d.Z)(n);try{for(o.s();!(r=o.n()).done;){r.value.remove()}}catch(i){o.e(i)}finally{o.f()}}}),[]),null}),v=[{attribution:'&copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors,<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",name:"OpenStreetMap",maxNativeZoom:19},{url:"https://{s}.tile.openstreetmap.de/{z}/{x}/{y}.png",maxNativeZoom:18,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',name:"OpenStreetMap.DE"},{url:"https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png",maxNativeZoom:20,attribution:'&copy; OpenStreetMap France | &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',name:"OpenStreetMap.FR"},{url:"https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",maxNativeZoom:19,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Tiles style by <a href="https://www.hotosm.org/" target="_blank">Humanitarian OpenStreetMap Team</a> hosted by <a href="https://openstreetmap.fr/" target="_blank">OpenStreetMap France</a>',name:"OpenStreetMap.HOT"},{url:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",maxNativeZoom:16,attribution:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)',name:"OpenTopoMap"},{attribution:'<a href="https://wiki.openstreetmap.org/wiki/Hiking/mri">&copy; sly</a> MODIS/Terra Snow Cover 8-day by NSDIC | ASTER GDEM is a product of METI and NASA | SRTM V4 thanks to CGIAR-CSI<br>EU-DEM produced using Copernicus data and information funded by the European Union | Donn\xe9es <a href="http://www.openstreetmap.org/copyright">&copy; les contributeurs OpenStreetMap</a>',url:"https://maps.refuges.info/hiking/{z}/{x}/{y}.png",name:"OpenStreetMap Hike",maxNativeZoom:18},{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &amp; USGS',url:"http://tile.mtbmap.cz/mtbmap_tiles/{z}/{x}/{y}.png",name:"mtbmap",maxNativeZoom:18},{attribution:'Data by <a href="http://www.openstreetmap.org" target="_blank" title="OpenStreetMap.org">OpenStreetMap.org</a> contributors under <a href="http://creativecommons.org/licenses/by-sa/2.0/" target="_blank">CC BY-SA 2.0</a> license<em> | Tiles: \xa9 Toursprung GmbH</em>',url:"https://vtile01.maptoolkit.net/raster/toursprung/terrain/{z}/{x}/{y}.png",name:"toursprung",maxNativeZoom:19},{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",name:"Esri.WorldImagery",maxNativeZoom:24}],x=[{attribution:'&copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors,<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>',url:"https://tile.waymarkedtrails.org/hiking/{z}/{x}/{y}.png",name:"waymarkedtrails",maxNativeZoom:18},{attribution:'&copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors,<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>',url:"https://a.gps-tile.openstreetmap.org/lines/{z}/{x}/{y}.png",name:"GPS Tracks",maxNativeZoom:24}],b=a(184),M=function(t){var e=t.data;return e&&e[0]&&e[0].accuracy?1===e.length?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(s.c,{center:[e[0].latitude,e[0].longitude],radius:2,fill:!0,opacity:1,fillOpacity:1}),(0,b.jsx)(c.C,{center:[e[0].latitude,e[0].longitude],radius:e[0].accuracy})]}):(0,b.jsx)(p.a,{positions:e.map((function(t){return[t.latitude,t.longitude]}))}):(0,b.jsx)(b.Fragment,{})},S=function(t){var e=t.center,a=(0,h.Sx)(),r=a.getCenter(),n=[r.lat-e[0],r.lng-e[1]];return n[0]*n[0]+n[1]*n[1]>.001&&a.setView(e,a.getZoom()),null},w=function(t){var e=t.data,a=t.hoverPointIdx,r=function(t){return t.map((function(t){return[t.latitude,t.longitude]})).reduce((function(t,e){return[t[0]+e[0],t[1]+e[1]]})).map((function(e){return e/t.length}))}(e);return(0,b.jsxs)(u.h,{center:r,zoom:13,style:{height:400,width:"100%"},children:[(0,b.jsx)(S,{center:r}),(0,b.jsx)(M,{data:e}),a&&(0,b.jsx)(s.c,{center:[e[a].latitude,e[a].longitude],radius:2,color:"black"}),(0,b.jsx)(y,{}),(0,b.jsxs)(l.et,{position:"topright",children:[v.map((function(t,e){return(0,b.jsx)(l.et.BaseLayer,{checked:0===e,name:t.name,children:(0,b.jsx)(m.I,{attribution:t.attribution,url:t.url})},e)})),x.map((function(t,e){return(0,b.jsx)(l.et.Overlay,{name:t.name,children:(0,b.jsx)(m.I,{attribution:t.attribution,url:t.url})},e)}))]})]})},j=a(3433),Z=a(1413),O=a(5849),A=a(4554),k=a(986),C=a(5596),E=a(2212),T=function(t){return.017453292519943295*t},F=function(t,e){var a=function(t){var e=6378137,a=6371001,r=e*Math.cos(t),n=a*Math.sin(t),o=Math.pow(e*r,2)+Math.pow(a*n,2),i=Math.pow(r,2)+Math.pow(n,2);return Math.sqrt(o/i)}((t.latRad+e.latRad)/2),r=e.latRad-t.latRad,n=e.lonRad-t.lonRad,o=Math.sin(r/2)*Math.sin(r/2)+Math.cos(t.latRad)*Math.cos(e.latRad)*Math.sin(n/2)*Math.sin(n/2);return a*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))};var I=function(t,e){return t.getElementsByTagName(e)[0].innerHTML},R=function(t){var e;return Array.from(t.getElementsByTagName("trkpt")).map((function(t,a){var r=new Date(I(t,"time")),n=Object.fromEntries(["ele","course","hAcc","vAcc","speed"].map((function(e){return[e,parseFloat(I(t,e))]}))),o=["lat","lon"].map((function(e){return parseFloat(t.getAttribute(e))})),i=(0,Z.Z)((0,Z.Z)({},n),{},{hAccuracy:n.hAcc,vAccuracy:n.vAcc,accuracy:Math.sqrt(n.hAcc*n.hAcc+n.vAcc*n.vAcc),latitude:o[0],longitude:o[1],latRad:T(o[0]),lonRad:T(o[1]),date:r,timestamp:r.getTime(),activeTime:a});if(a>0){var s=function(t,e){var a=F(t,e),r=Math.abs(e.ele-t.ele);return{dist:Math.sqrt(Math.pow(a,2)+Math.pow(r,2)),steep:r/a}}(i,e),c=s.dist,p=s.steep;i.distance=e.distance+c,i.steepness=isFinite(p)?100*p:0}else i.dist3d=0,i.distVi=0,i.speed3d=0,i.steepness=0,i.distance=i.speed;return e=i,i}))},N=function(t){var e=t.setData,a=(0,n.useState)(!1),o=(0,r.Z)(a,2),i=o[0],s=o[1];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(O.Z,{variant:"outlined",color:"info",endIcon:(0,b.jsx)(C.Z,{}),component:"label",style:{alignItems:"center",display:"flex",marginBottom:10},disabled:i,children:[i?"File is being parsed, please wait":"Upload GPX Track",(0,b.jsx)("input",{onChange:function(t){var a;s(!0),(a=t.target.files.item(0))&&a.text().then((function(t){for(var a=(new DOMParser).parseFromString(t,"text/xml"),r=R(a),n=["ele","speed","accuracy"],o=(0,E.tq)(r.length,90),i=Object.fromEntries(["speed","steepness"].map((function(t){return["".concat(t),(0,E.BX)(r.map((function(e){return e[t]})),o)]}))),c=Object.fromEntries(n.map((function(t){return[t,[Math.min.apply(Math,(0,j.Z)(r.map((function(e){return e[t]})))),Math.max.apply(Math,(0,j.Z)(r.map((function(e){return e[t]}))))]]}))),p=[],u=function(t){var e=Object.fromEntries(n.map((function(e){return["".concat(e,"_norm"),(r[t][e]-c[e][0])/(c[e][1]-c[e][0])]})));p.push((0,Z.Z)((0,Z.Z)({},r[t]),e)),Object.entries(i).forEach((function(e){p[t][e[0]]=e[1][t]}))},l=0;l<r.length;++l)u(l);e(p),s(!1)}))},type:"file",accept:".gpx",hidden:!0})]}),(0,b.jsx)(A.Z,{sx:{width:"100%"},children:i&&(0,b.jsx)(k.Z,{color:"info",size:"lg"})})]})},z=a.p+"static/media/gpx.e757839a7d589741e76c.jpg",G=(0,n.lazy)((function(){return Promise.all([a.e(286),a.e(952)]).then(a.bind(a,6952))})),D=function(t){var e,a,r,n,o,i,s=t.geolocation;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("h4",{children:"Geolocation Data:"}),s.error?(0,b.jsx)("p",{children:"Geolocation is not available, sorry."}):(0,b.jsxs)("ul",{style:{columns:2},children:[(0,b.jsxs)("li",{children:["Latitude: ",null===(e=s.latitude)||void 0===e?void 0:e.toFixed(5)," \xb1 ",Math.round(s.accuracy)]}),(0,b.jsxs)("li",{children:["Longitude: ",null===(a=s.longitude)||void 0===a?void 0:a.toFixed(5)," \xb1 ",Math.round(s.accuracy)]}),(0,b.jsxs)("li",{children:["Altitude: ",null===(r=s.altitude)||void 0===r?void 0:r.toFixed(1)," \xb1 ",null===(n=s.altitudeAccuracy)||void 0===n?void 0:n.toFixed(1)]}),(0,b.jsxs)("li",{children:["Heading: ",null===(o=s.heading)||void 0===o?void 0:o.toFixed(2)]}),(0,b.jsxs)("li",{children:["Speed: ",null===(i=s.speed)||void 0===i?void 0:i.toFixed(2)]}),(0,b.jsxs)("li",{children:["Timestamp: ",s.timestamp]})]})]})},B=(0,i.Z)(G),P=function(){var t=(0,o.Z)({enableHighAccuracy:!0}),e=(0,n.useState)([{latitude:45.4642,longitude:9.19}]),a=(0,r.Z)(e,2),i=a[0],s=a[1],c=(0,n.useState)(void 0),p=(0,r.Z)(c,2),u=p[0],l=p[1];return(0,n.useEffect)((function(){1===i.length&&!t.error&&t.latitude&&s([t])}),[t]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("img",{src:z,alt:"Usage example",style:{maxWidth:"100%",width:600,display:"block",marginLeft:"auto",marginRight:"auto"}}),(0,b.jsx)(D,{geolocation:t}),(0,b.jsx)(N,{setData:s}),(0,b.jsx)(w,{data:i,hoverPointIdx:u}),i&&i.length>1&&(0,b.jsx)(B,{data:i,setHoverPointIdx:l})]})}},2212:function(t,e,a){a.d(e,{BX:function(){return i},RJ:function(){return c},tq:function(){return s}});var r=a(3433),n=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=[];if(t<e)for(var n=t;n<e;n+=a)r.push(n);else for(var o=t;o>e;o+=a)r.push(o);return r},o=function(t,e){for(var a=0,r=0;r<t.length;++r)a+=t[r]*e[r];return a},i=function(t,e){for(var a=e.length,r=t.length,n=Math.trunc(a/2),i=[],s=0;s<r;++s){var c=e.slice(n-s,n-s+r);i.push(o(c,t)/c.reduce((function(t,e){return t+e}),0))}return i},s=function(t,e){return[].concat((0,r.Z)(Array(t-e+1).fill(0)),(0,r.Z)(n(1,e)),(0,r.Z)(n(e,0,-1)),(0,r.Z)(Array(t-e+1).fill(0)))},c=function(t,e){return[].concat((0,r.Z)(n(t,0,-1).map((function(t){return Math.pow(e,t)}))),(0,r.Z)(n(0,t+1).map((function(t){return Math.pow(e,t)}))))}}}]);
//# sourceMappingURL=842.41c67976.chunk.js.map